(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[6],{39:function(e,t,r){"use strict";r.r(t),r.d(t,"getAllUsers",(function(){return o}));var n=r(40),a=r.n(n),c=r(41),s=r(11),o=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:s.c}),e.prev=1,e.next=4,fetch("https://jsonplaceholder.typicode.com/users");case 4:return r=e.sent,e.next=7,r.json();case 7:n=e.sent,t({type:s.b,payload:n}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message),t({type:s.a,payload:"User info not available."});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}},42:function(e,t,r){"use strict";var n=r(0),a=r.n(n);r(43);t.a=function(e){return a.a.createElement("div",{className:"error-container"},a.a.createElement("h1",{className:"error-message"},"Ups! Something went wrong, ",a.a.createElement("strong",null,"please try again later.")),a.a.createElement("h3",{className:"error-description"},e.message))}},43:function(e,t,r){},49:function(e,t,r){"use strict";var n=r(0),a=r.n(n),c=r(50),s=r.n(c);t.a=function(e){var t=e.email,r=s()(t);return a.a.createElement("img",{className:e.className,src:"https://www.gravatar.com/avatar/".concat(r,"?d=identicon"),alt:"Avatar"})}},63:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPublicationByUser",(function(){return j}));var a=r(4),c=r(40),s=r.n(c),o=r(41),i=r(44),u=r(45),l=r(47),p=r(46),m=r(0),d=r.n(m),f=r(19),b=r(39);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=r(14),g=r(11),j=function(e){return function(){var t=Object(o.a)(s.a.mark((function t(r,n){var c,o,i,u,l,p,m,d,f;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:v.c}),t.prev=1,c=n().userReducer.users,o=n().publicationReducer.publications,t.next=6,fetch("https://jsonplaceholder.typicode.com/posts?userId=".concat(e));case 6:return i=t.sent,t.next=9,i.json();case 9:u=t.sent,l=u.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{comments:[],open:!1})})),p=[].concat(y(o),[l]),r({type:v.b,payload:p}),m=c.findIndex((function(t){return t.id===parseInt(e)})),console.log(m),d=p.length-1,(f=y(c))[m]=Object(a.a)(Object(a.a)({},c[m]),{},{publications_index:d}),console.log("updated_users",f),r({type:g.b,payload:f}),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(1),console.error(t.t0.message),r({type:v.a,payload:"The posts aren't available right now."});case 26:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,r){return t.apply(this,arguments)}}()},w=(r(63),r(20)),E=r(42),O=r(49),x=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).showUser=function(){var t=e.props,r=t.userReducer,n=t.match.params.key;return r.error?d.a.createElement(E.a,{message:r.error}):!r.users.length||r.loading?d.a.createElement(w.a,null):d.a.createElement("div",{className:"publication-header"},d.a.createElement("h1",{className:"author-title"},"Publications of ",d.a.createElement("strong",null,r.users[n].name)),d.a.createElement(O.a,{className:"publication-avatar",email:e.props.userReducer.users[e.props.match.params.key].email,alt:"Avatar"}))},e.validatePublications=function(){var t=e.props,r=t.userReducer,n=t.userReducer.users,a=t.publicationReducer,c=t.publicationReducer.publications,s=t.match.params.key;if(n.length&&!r.error){if(a.loading)return d.a.createElement(w.a,null);if(a.error)return d.a.createElement(E.a,{message:a.error});if(c.length&&"publications_index"in n[s]){var o=n[s].publications_index;return e.displayPublications(c[o],o)}}},e.displayPublications=function(e,t){return d.a.createElement(d.a.Fragment,null,e.map((function(e){return d.a.createElement("article",{className:"publication",key:e.id},d.a.createElement("h3",{className:"publication-title"},"Title: "+e.title),d.a.createElement("p",{className:"publication-body"},e.body))})))},e}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("props mount",this.props),t=this.props,r=t.getAllUsers,n=t.getPublicationByUser,a=t.match.params.key,this.props.userReducer.users.length){e.next=5;break}return e.next=5,r();case 5:"publications_index"in this.props.userReducer.users[a]||n(this.props.userReducer.users[a].id);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log("props",this.props),d.a.createElement("section",null,this.showUser(),this.validatePublications())}}]),r}(m.Component),k=Object(a.a)(Object(a.a)({},b),n);t.default=Object(f.b)((function(e){return{userReducer:e.userReducer,publicationReducer:e.publicationReducer}}),k)(x)}}]);
//# sourceMappingURL=6.0b58e03f.chunk.js.map