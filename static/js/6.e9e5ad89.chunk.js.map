{"version":3,"sources":["actions/userActions.js","components/Error/Error.js","components/Gravatar/Gravatar.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","actions/publicationActions.js","components/Publications/Publications.js"],"names":["getAllUsers","dispatch","a","type","LOADING","fetch","response","json","data","GET_ALL","payload","console","error","message","ERROR","Error","props","className","Gravatar","email","hash","md5","src","alt","_arrayLikeToArray","arr","len","length","i","arr2","Array","_toConsumableArray","isArray","iter","Symbol","iterator","Object","from","o","minLen","n","prototype","toString","call","slice","constructor","name","test","TypeError","getPublicationByUser","id","getState","users","userReducer","publications","publicationReducer","new_publications","map","publication","comments","open","updated_publications","GET_BY_USER","user_index","findIndex","user","parseInt","publications_index","updated_users","Publications","showUser","key","match","params","loading","Loader","validatePublications","displayPublications","title","body","this","Component","mapDispatchToProps","userActions","publicationActions","connect"],"mappings":"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","file":"static/js/6.e9e5ad89.chunk.js","sourcesContent":["import { GET_ALL, LOADING, ERROR } from '../types/userTypes';\n\nexport const getAllUsers = () => async (dispatch) => {\n  dispatch({\n    type: LOADING,\n  });\n  try {\n    const response = await fetch('https://jsonplaceholder.typicode.com/users');\n    const data = await response.json();\n\n    dispatch({\n      type: GET_ALL,\n      payload: data,\n    });\n  } catch (error) {\n    console.error(error.message);\n    dispatch({\n      type: ERROR,\n      payload: 'User info not available.',\n    });\n  }\n};\n","import React from 'react';\n\nimport './Error.css';\n\nconst Error = (props) => {\n  return(\n    <div className=\"error-container\">\n      <h1 className=\"error-message\">\n        Ups! Something went wrong, <strong>please try again later.</strong>\n      </h1>\n      <h3 className=\"error-description\">\n        {props.message}\n      </h3>\n    </div>\n  );\n};\n\nexport default Error;\n","import React from 'react';\nimport md5 from 'md5';\n\nfunction Gravatar(props) {\n  const email = props.email;\n  const hash = md5(email);\n\n  return (\n    <img\n      className={props.className}\n      src={`https://www.gravatar.com/avatar/${hash}?d=identicon`}\n      alt=\"Avatar\"\n    />\n  );\n}\n\nexport default Gravatar;\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { GET_BY_USER, LOADING, ERROR } from '../types/publicationTypes';\nimport { GET_ALL } from '../types/userTypes';\n\nexport const getPublicationByUser = (id) => async (dispatch, getState) => {\n  dispatch({\n    type: LOADING,\n  });\n  try {\n    const { users } = getState().userReducer;\n    const { publications } = getState().publicationReducer;\n\n    const response = await fetch(\n      `https://jsonplaceholder.typicode.com/posts?userId=${id}`\n    );\n    const data = await response.json();\n\n    const new_publications = data.map((publication) => ({\n      ...publication,\n      comments: [],\n      open: false,\n    }));\n\n    const updated_publications = [...publications, new_publications];\n\n    dispatch({\n      type: GET_BY_USER,\n      payload: updated_publications,\n    });\n\n    const user_index = users.findIndex((user) => user.id === parseInt(id));\n    const publications_index = updated_publications.length - 1;\n    const updated_users = [...users];\n    updated_users[user_index] = {\n      ...users[user_index],\n      publications_index,\n    };\n\n    dispatch({\n      type: GET_ALL,\n      payload: updated_users,\n    });\n  } catch (error) {\n    console.error(error.message);\n    dispatch({\n      type: ERROR,\n      payload: \"The posts aren't available right now.\",\n    });\n  }\n};\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as userActions from '../../actions/userActions';\nimport * as publicationActions from '../../actions/publicationActions';\n\nimport './Publications.css';\n\nimport Loader from '../Loader/Loader';\nimport Error from '../Error/Error';\nimport Gravatar from '../Gravatar/Gravatar';\n\nclass Publications extends Component {\n  // To assure that the users are available before the call of getPublicationsByUser\n  // I made the componentDidMount async and await for getAllUsers\n  async componentDidMount() {\n    // Destructuring for better and cleaner code\n    // The last one is the destructuring of this.props.match.params.key\n    const {\n      getAllUsers,\n      getPublicationByUser,\n      match: {\n        params: { key },\n      },\n    } = this.props;\n\n    if (!this.props.userReducer.users.length) {\n      await getAllUsers();\n    }\n    if (!('publications_index' in this.props.userReducer.users[key]))\n      getPublicationByUser(this.props.userReducer.users[key].id);\n  }\n\n  showUser = () => {\n    const {\n      userReducer,\n      match: {\n        params: { key },\n      },\n    } = this.props;\n\n    if (userReducer.error) {\n      return <Error message={userReducer.error} />;\n    }\n    if (!userReducer.users.length || userReducer.loading) {\n      return <Loader />;\n    }\n\n    return (\n      <div className=\"publication-header\">\n        <h1 className=\"author-title\">\n          Publications of <strong>{userReducer.users[key].name}</strong>\n        </h1>\n        <Gravatar\n          className=\"publication-avatar\"\n          email={\n            this.props.userReducer.users[this.props.match.params.key].email\n          }\n          alt=\"Avatar\"\n        />\n      </div>\n    );\n  };\n\n  validatePublications = () => {\n    const {\n      userReducer,\n      userReducer: { users },\n      publicationReducer,\n      publicationReducer: { publications },\n      match: {\n        params: { key },\n      },\n    } = this.props;\n\n    if (!users.length) return;\n    if (userReducer.error) return;\n\n    if (publicationReducer.loading) {\n      return <Loader />;\n    }\n    if (publicationReducer.error) {\n      return <Error message={publicationReducer.error} />;\n    }\n    if (!publications.length) return;\n    if (!('publications_index' in users[key])) return;\n\n    const { publications_index } = users[key];\n\n    return this.displayPublications(\n      publications[publications_index],\n      publications_index\n    );\n  };\n\n  displayPublications = (publications, publications_index) => {\n    return (\n      <>\n        {publications.map((publication) => (\n          <article className=\"publication\" key={publication.id}>\n            <h3 className=\"publication-title\">\n              {'Title: ' + publication.title}\n            </h3>\n            <p className=\"publication-body\">{publication.body}</p>\n          </article>\n        ))}\n      </>\n    );\n  };\n\n  render() {\n    return (\n      <section>\n        {this.showUser()}\n        {this.validatePublications()}\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = ({ userReducer, publicationReducer }) => {\n  return {\n    userReducer,\n    publicationReducer,\n  };\n};\n\nconst mapDispatchToProps = {\n  ...userActions,\n  ...publicationActions,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Publications);\n"],"sourceRoot":""}